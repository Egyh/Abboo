<div class='container'>
  <div class='row'>
    <div class='col-md-3'>
      <%= render 'public/users/info',user: @user %>
     </div>

     <div class="col-md-8 offset-md-1"  style="margin-top: 50px;">

<div class="card m-2 text-center card-warpper">
   <%= image_tag @article.get_article_image, class:"card-img-top" %>
  <div class="card-body">
    <h4 class="card-title"><%= @article.title %></h4>
    <!--<p class="card-text"><%#= @article.body %></p>-->
    <%= render_with_hashtags(@article.body) %>
  </div>

<h2>ロケーション</h2>
<div id='map'></div>

<style>
#map{
  height: 200px;
}
</style>

<script>
function initMap(){
  let map = new google.maps.Map(document.getElementById('map'), {
  center: {lat: <%= @article.get_latitude %>, lng: <%= @article.get_longitude %>},
  zoom: 8
  });

  var marker = new google.maps.Marker({
          map: map,

          position: {lat: <%= @article.get_latitude %>, lng: <%= @article.get_longitude %>},
      });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['SECRET_KEY'] %>&callback=initMap" async defer></script>



<div id="favorite_buttons_<%= @article.id %>">
　　　<%= render "public/favorites/favorite", article: @article %>
　　</div>

<div id="article_comments_<%= @article.id %>">
  <%= render "public/article_comments/comment", article: @article %>
  </div>


    <%= form_with model: [@article, @article_comment], local: false do |f| %>
      <div><%= f.text_area :comment, rows: '5', placeholder: "comment", class: "form-control" %> </div>
      <div><%= f.submit "送信", class: "btn btn-primary" %></div>
        <% end %>

   <% if @article.user == current_user %>
    <%= link_to 'Edit', edit_article_path(@article), class: "btn btn-sm btn-success" %>
    <%= link_to 'Destroy', @article, method: :delete, data: { confirm: '本当に消しますか？' }, class: "btn btn-sm btn-danger"%>
   <% end %>

</div>

  </div>
   </div>
   </div>